<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>RoScript Browser</title>
<style>
  :root{
    --bg: #0c1117;
    --panel:#121821;
    --card:#141b24;
    --card-2:#111823;
    --border:#263041;
    --muted:#8b94a7;
    --text:#e7edf5;
    --primary:#3b82f6;
    --good:#22c55e;
    --bad:#ef4444;
    --chip:#1a2433;
    --ring:#3b82f6;
    --shadow:0 10px 30px rgba(0,0,0,.35);
    --radius:18px;
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    background: radial-gradient(1200px 500px at 50% -50%, #101726 0%, #0b111a 60%, var(--bg) 100%);
    color:var(--text);
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans";
  }

  /* top bar */
  .topbar{position:sticky;top:0;z-index:30;backdrop-filter: blur(8px);background:linear-gradient(180deg, rgba(16,23,35,.82), rgba(16,23,35,.6));border-bottom:1px solid var(--border);}
  .topbar-inner{max-width:1280px;margin:0 auto;padding:14px 20px;display:flex;align-items:center;gap:14px;}
  .brand{display:flex;align-items:center;gap:10px;font-weight:700;}
  .logo{width:34px;height:34px;border-radius:10px;background:linear-gradient(135deg,#ff9966,#ff5e62);display:grid;place-items:center;color:#091116;font-weight:800;border:1px solid #ffb19966;box-shadow:0 4px 14px rgba(255,105,85,.3);}
  .search{margin-left:auto;position:relative;flex:0 1 540px;}
  .search input{width:100%;background:var(--panel);border:1px solid var(--border);color:var(--text);padding:12px 44px;border-radius:14px;}
  .search .icon{position:absolute;left:14px;top:50%;transform:translateY(-50%);opacity:.7;}

  /* hero */
  .hero{max-width:980px;margin:42px auto 10px;text-align:center;padding:0 16px;}
  .hero h1{margin:0 0 8px;font-size:42px;line-height:1.15;text-shadow:0 10px 40px rgba(0,0,0,.35);}
  .hero p{margin:0;color:var(--muted)}

  /* grid */
  .wrap{max-width:1280px;margin:26px auto 80px;padding:0 16px;}
  .grid{display:grid;gap:22px;grid-template-columns:repeat(12, 1fr);}
  @media (min-width:1150px){ .card{grid-column: span 3;} }
  @media (min-width:780px) and (max-width:1149px){ .card{grid-column: span 4;} }
  @media (max-width:779px){ .card{grid-column: span 12;} }

  /* card */
  .card{background:linear-gradient(180deg,var(--card), var(--card-2));border:1px solid var(--border);border-radius:var(--radius);padding:18px;min-height:245px;box-shadow: var(--shadow);display:flex;flex-direction:column;gap:10px;cursor:pointer;transition:transform .18s;}
  .card:hover{transform:translateY(-6px);border-color:#3b82f633;box-shadow:0 20px 40px rgba(6,11,19,.65);}
  .patched{position:absolute;top:12px;right:12px;background:linear-gradient(180deg, #ff5a6d, #ef4444);color:white;font-size:.75rem;font-weight:700;padding:5px 9px;border-radius:999px;}
  .title{font-size:18px;font-weight:750;}
  .subtitle{color:var(--muted);font-size:.92rem}
  .desc{font-size:.93rem;color:#cbd5e1;line-height:1.45;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;display:-webkit-box;}
  .chips{display:flex;gap:8px;flex-wrap:wrap;margin-top:6px;}
  .chip{background:var(--chip);border:1px solid var(--border);color:#c7d1e5;padding:5px 10px;border-radius:999px;font-size:.78rem;}
  .stats{margin-top:auto;padding-top:12px;display:flex;gap:12px;flex-wrap:wrap;border-top:1px dashed #263449;}
  .pill{display:flex;align-items:center;gap:8px;background:#0f1622;border:1px solid var(--border);padding:7px 12px;border-radius:999px;color:#c0cada;font-size:.85rem;}

  /* modal */
  .modal{position:fixed;inset:0;display:none;place-items:center;background:rgba(4,10,18,.65);backdrop-filter: blur(6px);z-index:50;}
  .sheet{width:min(920px,95vw);background:linear-gradient(180deg,#121a26,#0f1621);border:1px solid var(--border);border-radius:20px;overflow:hidden;}
  .sheet-head{padding:18px 20px;display:flex;align-items:center;gap:12px;border-bottom:1px solid var(--border);}
  .sheet-title{font-size:20px;font-weight:800;}
  .sheet-close{margin-left:auto;width:36px;height:36px;display:grid;place-items:center;border-radius:12px;border:1px solid var(--border);background:#0f1621;color:#cbd5e1;cursor:pointer;}
  .sheet-body{padding:16px 20px;display:grid;gap:16px;}
  .sheet-desc{color:#cad5e7}
  .code{background:#0a1018;border:1px solid #1f2a3a;color:#e7edf5;border-radius:14px;padding:14px;max-height:380px;overflow:auto;font-family:monospace;}
  .actions{display:flex;gap:10px;justify-content:flex-end}
  .btn{border:1px solid var(--border);border-radius:12px;padding:10px 14px;background:#101827;color:#dbe8ff;font-weight:700;cursor:pointer;}
  .btn.primary{background:#1b2a44;border-color:#2f70ff55}

  .toast{position:fixed;bottom:22px;left:50%;transform:translateX(-50%);background:#0e1726;border:1px solid #3156ff55;color:#dbe8ff;padding:10px 14px;border-radius:12px;display:none;}
</style>
</head>
<body>
  <!-- topbar -->
  <div class="topbar">
    <div class="topbar-inner">
      <div class="brand"><div class="logo">R</div><span>RoScript</span></div>
      <div class="search">
        <span class="icon"><svg viewBox="0 0 24 24"><circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="2"/><path d="M20 20l-3-3" stroke="currentColor" stroke-width="2"/></svg></span>
        <input id="search" placeholder="Search for Roblox scripts...">
      </div>
    </div>
  </div>

  <!-- hero -->
  <div class="hero">
    <h1>RoScript Browser</h1>
    <p>Discover Roblox scripts from ScriptBlox with a clean, modern interface.</p>
  </div>

  <!-- grid -->
  <div class="wrap"><div id="grid" class="grid"></div></div>

  <!-- modal -->
  <div id="modal" class="modal">
    <div class="sheet">
      <div class="sheet-head">
        <div><div id="mTitle" class="sheet-title">Title</div><div id="mGame"></div></div>
        <span id="mPatched" class="patched" style="display:none">Patched</span>
        <button id="close" class="sheet-close">‚úï</button>
      </div>
      <div class="sheet-body">
        <div id="mDesc" class="sheet-desc"></div>
        <pre id="mCode" class="code">Loading script‚Ä¶</pre>
        <div class="actions">
          <button id="copy" class="btn primary">Copy Script</button>
          <a id="openPage" class="btn" target="_blank">Open on ScriptBlox</a>
        </div>
      </div>
    </div>
  </div>

  <div id="toast" class="toast">Copied!</div>

<script>
const grid = document.getElementById("grid");
const searchInput = document.getElementById("search");
const modal = document.getElementById("modal");
const mTitle = document.getElementById("mTitle");
const mGame = document.getElementById("mGame");
const mPatched = document.getElementById("mPatched");
const mDesc = document.getElementById("mDesc");
const mCode = document.getElementById("mCode");
const copyBtn = document.getElementById("copy");
const openPage = document.getElementById("openPage");
const closeBtn = document.getElementById("close");
const toast = document.getElementById("toast");

let ALL = [];

function clamp(str, n){return str && str.length>n?str.slice(0,n-1)+"‚Ä¶":str||"";}
function nfmt(n){return n>=1e6?(n/1e6).toFixed(1)+"M":n>=1e3?(n/1e3).toFixed(1)+"K":n;}
function fmtDate(iso){return new Date(iso).toLocaleDateString();}

async function fetchScripts(){
  const res = await fetch("https://scriptblox.com/api/script/fetch");
  const data = await res.json();
  ALL = data?.result?.scripts || [];
  render(ALL);
}

async function searchScripts(q){
  const res = await fetch("https://scriptblox.com/api/script/search?q="+encodeURIComponent(q));
  const data = await res.json();
  render(data?.result?.scripts || []);
}

function render(list){
  grid.innerHTML = "";
  list.forEach(s=>{
    const gameName = s?.game?.name || "Universal";
    const el=document.createElement("div");
    el.className="card";
    el.innerHTML=`
      ${s.isPatched?`<span class="patched">Patched</span>`:""}
      <div class="title">${clamp(s.title,56)}</div>
      <div class="subtitle">${gameName}</div>
      <div class="desc">${clamp(s.description||"No description",180)}</div>
      <div class="chips"><span class="chip">${gameName}</span></div>
      <div class="stats">
        <div class="pill">üëÅ ${nfmt(s.views||0)}</div>
        <div class="pill">‚ù§Ô∏è ${nfmt(s.likeCount||0)}</div>
        <div class="pill">üìÖ ${fmtDate(s.createdAt)}</div>
      </div>`;
    el.onclick=()=>openSheet(s);
    grid.appendChild(el);
  });
}

async function getScriptCode(s){
  if(s.script) return s.script;
  if(s.slug){
    const r=await fetch(`https://scriptblox.com/api/script/details?slug=${s.slug}`);
    const d=await r.json();
    return d?.script?.script||d?.result?.script||null;
  }
  return null;
}

async function openSheet(s){
  mTitle.textContent=s.title;
  mGame.textContent=s?.game?.name||"Universal";
  mPatched.style.display=s.isPatched?"inline-block":"none";
  mDesc.textContent=s.description||"No description.";
  mCode.textContent="Loading script‚Ä¶";
  openPage.href=`https://scriptblox.com/script/${s.slug||""}`;
  modal.style.display="grid";

  const code=await getScriptCode(s);
  mCode.textContent=code||"No script content available.";
  copyBtn.onclick=()=>{if(code){navigator.clipboard.writeText(code);showToast("Copied!");}};
}

closeBtn.onclick=()=>{modal.style.display="none";};
modal.onclick=e=>{if(e.target===modal) modal.style.display="none";};

searchInput.oninput=e=>{
  const q=e.target.value.trim();
  if(!q) render(ALL); else searchScripts(q);
};

function showToast(msg){toast.textContent=msg;toast.style.display="block";setTimeout(()=>toast.style.display="none",1200);}

fetchScripts();
</script>
</body>
</html>
