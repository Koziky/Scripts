<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>KozyScript Browser</title>

  <!-- Tailwind CDN (works on GitHub Pages) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    /* Map your CSS variables to Tailwind utilities so classes like bg-background work */
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            background: "hsl(var(--background))",
            foreground: "hsl(var(--foreground))",
            card: "hsl(var(--card))",
            "card-foreground": "hsl(var(--card-foreground))",
            popover: "hsl(var(--popover))",
            "popover-foreground": "hsl(var(--popover-foreground))",
            primary: "hsl(var(--primary))",
            "primary-foreground": "hsl(var(--primary-foreground))",
            secondary: "hsl(var(--secondary))",
            "secondary-foreground": "hsl(var(--secondary-foreground))",
            muted: "hsl(var(--muted))",
            "muted-foreground": "hsl(var(--muted-foreground))",
            accent: "hsl(var(--accent))",
            "accent-foreground": "hsl(var(--accent-foreground))",
            destructive: "hsl(var(--destructive))",
            "destructive-foreground": "hsl(var(--destructive-foreground))",
            border: "hsl(var(--border))",
            input: "hsl(var(--input))",
            ring: "hsl(var(--ring))",
            success: "hsl(var(--success))",
            "success-foreground": "hsl(var(--success-foreground))",
          },
          borderRadius: {
            lg: "var(--radius)",
            xl: "calc(var(--radius) + 4px)",
            "2xl": "calc(var(--radius) + 8px)",
          },
          boxShadow: {
            elevated: "0 20px 40px hsl(215 28% 4% / 0.8)",
          },
          keyframes: {
            "fade-in": { from: { opacity: 0 }, to: { opacity: 1 } },
            "pop-in": {
              "0%": { transform: "scale(.96)", opacity: 0 },
              "100%": { transform: "scale(1)", opacity: 1 },
            },
          },
          animation: {
            "fade-in": "fade-in .2s ease-out both",
            "pop-in": "pop-in .2s var(--transition-smooth) both",
          },
        },
      },
    };
  </script>

  <!-- Lucide icons (for <i data-lucide="...">) -->
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

  <!-- Your Design System + extras -->
  <style type="text/tailwindcss">
    @tailwind base;
    @tailwind components;
    @tailwind utilities;

    /* ===== Roblox-inspired gaming theme (your variables) ===== */
    @layer base {
      :root {
        --background: 215 28% 9%;
        --foreground: 213 31% 91%;
        --card: 215 25% 12%;
        --card-foreground: 213 31% 91%;
        --popover: 215 25% 12%;
        --popover-foreground: 213 31% 91%;
        --primary: 213 94% 68%;
        --primary-foreground: 215 28% 9%;
        --secondary: 25 95% 60%;
        --secondary-foreground: 215 28% 9%;
        --muted: 215 25% 16%;
        --muted-foreground: 213 19% 65%;
        --accent: 213 94% 68%;
        --accent-foreground: 215 28% 9%;
        --destructive: 0 84% 60%;
        --destructive-foreground: 213 31% 91%;
        --border: 215 25% 20%;
        --input: 215 25% 16%;
        --ring: 213 94% 68%;
        --success: 142 71% 45%;
        --success-foreground: 213 31% 91%;
        --gradient-primary: linear-gradient(135deg, hsl(213 94% 68%), hsl(25 95% 60%));
        --gradient-hero: linear-gradient(135deg, hsl(215 28% 9%) 0%, hsl(215 25% 12%) 50%, hsl(215 28% 9%) 100%);
        --radius: 0.75rem;
      }

      body {
        @apply bg-background text-foreground antialiased;
        background: hsl(var(--background));
      }

      /* Custom scrollbar (plain CSS so it works with CDN) */
      ::-webkit-scrollbar { width: .5rem; height: .5rem; }
      ::-webkit-scrollbar-track { background: hsl(var(--muted)); }
      ::-webkit-scrollbar-thumb {
        background: hsl(var(--primary) / .5); border-radius: 9999px;
      }
      ::-webkit-scrollbar-thumb:hover { background: hsl(var(--primary)); }
    }

    @layer components {
      .btn-gaming {
        @apply bg-gradient-to-r from-primary to-secondary text-primary-foreground font-semibold px-4 py-2 rounded-lg
               shadow-md hover:shadow-lg hover:scale-105 active:scale-95 transition-all duration-300;
      }
      .btn-ghost-gaming {
        @apply bg-card/50 border border-border hover:bg-card hover:border-primary/50 backdrop-blur-sm
               transition-all duration-300 rounded-lg px-3 py-2;
      }
      .badge {
        @apply inline-flex items-center rounded-md border border-border/50 bg-muted/60 px-2 py-0.5 text-xs font-medium;
      }
      .badge-destructive { @apply border-destructive/40 text-destructive; }
      .badge-secondary { @apply bg-secondary/20 text-secondary; }
      .badge-outline { @apply border-foreground/20 bg-transparent; }

      .card-gaming {
        @apply bg-gradient-to-br from-card via-card to-card/80 border border-border/50 rounded-xl shadow-lg
               transition-all duration-300 backdrop-blur-sm p-6 hover:shadow-elevated hover:scale-[1.015];
      }
      .card-gaming:hover { @apply border-primary/40 shadow-[0_0_30px_hsl(var(--primary)/0.18)]; }

      .text-gradient-primary {
        @apply bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent;
      }
      .glow-primary { filter: drop-shadow(0 0 8px hsl(var(--primary) / .35)); }
    }

    /* ===== Extra CSS you asked to include (root/logo/spin) ===== */
    #root { max-width: 1280px; margin: 0 auto; padding: 2rem; text-align: center; }
    .logo { height: 6em; padding: 1.5em; will-change: filter; transition: filter 300ms; }
    .logo:hover { filter: drop-shadow(0 0 2em #646cffaa); }
    .logo.react:hover { filter: drop-shadow(0 0 2em #61dafbaa); }
    @keyframes logo-spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }
    @media (prefers-reduced-motion: no-preference) {
      a:nth-of-type(2) .logo { animation: logo-spin infinite 20s linear; }
    }
    .card { padding: 2em; }
    .read-the-docs { color: #888; }
  </style>
</head>

<body class="min-h-screen">
  <!-- Top bar -->
  <header class="sticky top-0 z-40 border-b border-border/40 bg-card/50 backdrop-blur-md">
    <div class="mx-auto max-w-7xl px-4 py-3 flex items-center gap-4">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-lg bg-gradient-to-tr from-primary to-secondary flex items-center justify-center glow-primary">
          <span class="text-lg font-bold text-primary-foreground">K</span>
        </div>
        <div>
          <div class="font-bold text-gradient-primary leading-5">KozyScript</div>
          <div class="text-xs text-muted-foreground -mt-0.5">Roblox Script Browser</div>
        </div>
      </div>

      <form id="searchForm" class="flex-1 max-w-2xl ml-auto">
        <div class="relative">
          <i data-lucide="search" class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"></i>
          <input id="searchInput" type="text" placeholder="Search for Roblox scripts..."
                 class="w-full pl-10 pr-4 py-2 rounded-lg bg-muted border border-border/50 text-foreground
                        focus:outline-none focus:ring-2 focus:ring-primary/30" />
        </div>
      </form>

      <button id="refreshBtn" class="btn-ghost-gaming" title="Refresh">
        <i data-lucide="refresh-ccw" class="w-4 h-4"></i>
      </button>
    </div>
  </header>

  <!-- Hero -->
  <section class="mx-auto max-w-7xl px-4 py-10 text-center">
    <h1 class="text-5xl font-extrabold text-gradient-primary mb-3">KozyScript Browser</h1>
    <p class="text-lg text-muted-foreground max-w-3xl mx-auto">
      Discover and download the best Roblox scripts from ScriptBlox.
      Find working scripts for your favorite games with our clean, modern interface.
    </p>

    <div id="searchHint" class="hidden mt-6 inline-flex items-center gap-2 bg-card/60 border border-border/50 rounded-lg px-4 py-2">
      <span class="text-sm text-muted-foreground">Searching for:</span>
      <span id="searchText" class="text-sm font-semibold text-primary"></span>
      <span class="text-sm text-muted-foreground">•</span>
      <span id="searchCount" class="text-sm text-muted-foreground">0 results</span>
    </div>
  </section>

  <!-- Grid -->
  <main class="mx-auto max-w-7xl px-4 pb-16">
    <div id="grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"></div>

    <!-- Empty state -->
    <div id="emptyState" class="hidden text-center py-20">
      <div class="w-16 h-16 mx-auto rounded-full bg-muted flex items-center justify-center mb-4">
        <i data-lucide="alert-circle" class="w-8 h-8 text-muted-foreground"></i>
      </div>
      <h3 class="text-xl font-semibold">No Scripts Found</h3>
      <p class="text-muted-foreground max-w-md mx-auto">
        Try a different search term, or clear the search.
      </p>
    </div>
  </main>

  <!-- Footer -->
  <footer class="border-t border-border/40 py-8 text-center">
    <p class="text-sm text-muted-foreground">
      KozyScript Browser • Browse Roblox scripts safely •
      <span class="text-primary font-medium">Always verify scripts before use</span>
    </p>
  </footer>

  <!-- Modal -->
  <div id="modal" class="fixed inset-0 bg-black/80 hidden items-center justify-center p-4">
    <div class="max-w-4xl w-full bg-card border border-border/60 rounded-xl shadow-xl animate-pop-in">
      <div class="p-6 border-b border-border/50 flex items-start justify-between gap-4">
        <div>
          <h3 id="mTitle" class="text-2xl font-bold text-gradient-primary leading-tight"></h3>
          <p id="mGame" class="text-sm text-muted-foreground mt-1"></p>
          <div id="mTags" class="flex flex-wrap gap-2 mt-3"></div>
          <div class="flex flex-wrap items-center gap-4 text-sm text-muted-foreground mt-3">
            <div class="flex items-center gap-1"><i data-lucide="eye" class="w-4 h-4"></i><span id="mViews"></span></div>
            <div class="flex items-center gap-1"><i data-lucide="heart" class="w-4 h-4"></i><span id="mLikes"></span></div>
            <div class="flex items-center gap-1"><i data-lucide="calendar" class="w-4 h-4"></i><span id="mDate"></span></div>
            <div class="flex items-center gap-1"><i data-lucide="user" class="w-4 h-4"></i><span id="mAuthor"></span></div>
          </div>
        </div>
        <div class="flex items-center gap-2">
          <span id="mPatched" class="hidden badge badge-destructive">Patched</span>
          <button id="closeModal" class="btn-ghost-gaming" aria-label="Close"><i data-lucide="x"></i></button>
        </div>
      </div>
      <div class="p-6 space-y-4">
        <p id="mDesc" class="text-muted-foreground"></p>
        <div>
          <div class="flex items-center justify-between mb-2">
            <h4 class="font-semibold">Script Code</h4>
            <button id="copyBtn" class="btn-gaming flex items-center gap-2 text-sm">
              <i data-lucide="copy"></i><span>Copy Script</span>
            </button>
          </div>
          <pre class="bg-muted/50 border border-border/50 rounded-lg p-4 text-sm font-mono overflow-x-auto max-h-96 leading-relaxed"><code id="mCode" class="text-foreground"></code></pre>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="fixed bottom-4 right-4 hidden">
    <div class="bg-card border border-border/60 rounded-lg px-4 py-2 shadow-lg flex items-center gap-2">
      <i data-lucide="check" class="w-4 h-4 text-success"></i>
      <span class="text-sm">Copied to clipboard</span>
    </div>
  </div>

  <script>
    // --- Data (mock) ---
    const mockScripts = [
      {
        id: "1",
        title: "Universal Script Hub",
        description:
          "A comprehensive script hub with multiple game support including Arsenal, Phantom Forces, and more. Features auto-aim, ESP, speed hacks and other popular features.",
        author: "ScriptMaster",
        game: "Universal",
        views: 125000,
        likes: 8500,
        created: "2024-01-15",
        isPatched: false,
        tags: ["Universal", "GUI", "Auto-Aim", "ESP"],
        scriptContent:
`-- Example placeholder code
print("Universal Script Hub Loaded!")`
      },
      {
        id: "2",
        title: "Arsenal Aimbot & ESP",
        description:
          "Advanced Arsenal script with smooth aimbot, wallhacks, ESP, and weapon modifications. Updated for latest Arsenal version.",
        author: "CombatHacker",
        game: "Arsenal",
        views: 89000,
        likes: 6200,
        created: "2024-02-01",
        isPatched: false,
        tags: ["Arsenal", "Aimbot", "ESP", "Wallhack"],
        scriptContent:
`-- Example placeholder code
print("Arsenal Script Loaded!")`
      },
      {
        id: "3",
        title: "Blox Fruits Auto Farm",
        description:
          "Complete auto-farming script for Blox Fruits with level detection, quest automation, and fruit collection. Safe and undetectable.",
        author: "FarmBot2024",
        game: "Blox Fruits",
        views: 234000,
        likes: 15600,
        created: "2024-01-28",
        isPatched: true,
        tags: ["Blox Fruits", "Auto Farm", "Quests", "Fruits"],
        scriptContent:
`-- Example placeholder code
print("Blox Fruits Auto Farm (Patched)")`
      },
      {
        id: "4",
        title: "Phantom Forces Aimbot",
        description:
          "Highly accurate aimbot for Phantom Forces with customizable settings, silent aim, and anti-detection features.",
        author: "TacticalShooter",
        game: "Phantom Forces",
        views: 67000,
        likes: 4100,
        created: "2024-02-10",
        isPatched: false,
        tags: ["Phantom Forces", "Aimbot", "Silent Aim"],
        scriptContent:
`-- Example placeholder code
print("Phantom Forces Aimbot Loaded!")`
      },
      {
        id: "5",
        title: "Da Hood Mod Menu",
        description:
          "Complete mod menu for Da Hood with teleports, money farming, anti-admin, and custom animations. Regular updates included.",
        author: "HoodScripter",
        game: "Da Hood",
        views: 156000,
        likes: 9800,
        created: "2024-02-05",
        isPatched: false,
        tags: ["Da Hood", "Mod Menu", "Teleports", "Money"],
        scriptContent:
`-- Example placeholder code
print("Da Hood Mod Menu Loaded!")`
      },
      {
        id: "6",
        title: "Pet Simulator X Duplication",
        description:
          "Working pet and gem duplication script for Pet Simulator X. Includes auto-hatch and more.",
        author: "PetMaster99",
        game: "Pet Simulator X",
        views: 198000,
        likes: 12300,
        created: "2024-01-20",
        isPatched: true,
        tags: ["Pet Sim X", "Duplication", "Auto Hatch", "Gems"],
        scriptContent:
`-- Example placeholder code
print("Pet Simulator X Script - Some features may be patched")`
      },
    ];

    // --- Helpers ---
    const formatNumber = (n) => (n >= 1_000_000 ? (n / 1_000_000).toFixed(1) + "M" :
                                 n >= 1_000 ? (n / 1_000).toFixed(1) + "K" : String(n));
    const formatDate = (s) => new Date(s).toLocaleDateString(undefined, { year: "numeric", month: "short", day: "numeric" });

    // --- DOM refs ---
    const grid = document.getElementById("grid");
    const emptyState = document.getElementById("emptyState");
    const searchForm = document.getElementById("searchForm");
    const searchInput = document.getElementById("searchInput");
    const refreshBtn = document.getElementById("refreshBtn");
    const searchHint = document.getElementById("searchHint");
    const searchText = document.getElementById("searchText");
    const searchCount = document.getElementById("searchCount");

    // Modal refs
    const modal = document.getElementById("modal");
    const closeModal = document.getElementById("closeModal");
    const mTitle = document.getElementById("mTitle");
    const mGame  = document.getElementById("mGame");
    const mDesc  = document.getElementById("mDesc");
    const mTags  = document.getElementById("mTags");
    const mViews = document.getElementById("mViews");
    const mLikes = document.getElementById("mLikes");
    const mDate  = document.getElementById("mDate");
    const mAuthor= document.getElementById("mAuthor");
    const mPatched = document.getElementById("mPatched");
    const mCode  = document.getElementById("mCode");
    const copyBtn= document.getElementById("copyBtn");
    const toast  = document.getElementById("toast");

    let current = []; // current list
    let selected = null;

    function renderCards(list) {
      grid.innerHTML = "";
      if (!list.length) {
        emptyState.classList.remove("hidden");
        return;
      }
      emptyState.classList.add("hidden");

      list.forEach((s) => {
        const card = document.createElement("div");
        card.className = "card-gaming cursor-pointer group";
        card.innerHTML = `
          <div class="flex items-start justify-between gap-3">
            <div>
              <h3 class="font-bold text-lg group-hover:text-primary transition-colors">${s.title}</h3>
              ${s.game ? `<p class="text-sm text-muted-foreground mt-1">${s.game}</p>` : ""}
            </div>
            ${s.isPatched ? `<span class="badge badge-destructive">Patched</span>` : ""}
          </div>

          <p class="text-sm text-muted-foreground mt-3 line-clamp-3">${s.description}</p>

          <div class="flex flex-wrap gap-2 mt-4">
            ${s.tags.slice(0, 3).map(t => `<span class="badge">${t}</span>`).join("")}
            ${s.tags.length > 3 ? `<span class="badge badge-outline">+${s.tags.length - 3} more</span>` : ""}
          </div>

          <div class="flex items-center justify-between pt-3 mt-4 border-t border-border/50">
            <div class="flex items-center gap-4 text-sm text-muted-foreground">
              <span class="inline-flex items-center gap-1"><i data-lucide="eye" class="w-4 h-4"></i> ${formatNumber(s.views)}</span>
              <span class="inline-flex items-center gap-1"><i data-lucide="user" class="w-4 h-4"></i> ${s.author}</span>
              <span class="inline-flex items-center gap-1"><i data-lucide="calendar" class="w-4 h-4"></i> ${formatDate(s.created)}</span>
            </div>
            <button class="btn-ghost-gaming shrink-0" title="Open">
              <i data-lucide="download" class="w-4 h-4"></i>
            </button>
          </div>
        `;
        card.addEventListener("click", () => openModal(s));
        grid.appendChild(card);
      });

      // rehydrate icons
      window.lucide && lucide.createIcons();
    }

    function search(query) {
      const q = (query || "").trim().toLowerCase();
      if (!q) return [...mockScripts];
      return mockScripts.filter(s =>
        s.title.toLowerCase().includes(q) ||
        (s.description && s.description.toLowerCase().includes(q)) ||
        (s.game && s.game.toLowerCase().includes(q)) ||
        s.author.toLowerCase().includes(q) ||
        s.tags.some(t => t.toLowerCase().includes(q))
      );
    }

    function openModal(s) {
      selected = s;
      mTitle.textContent = s.title;
      mGame.textContent = s.game || "";
      mDesc.textContent = s.description || "";
      mTags.innerHTML = s.tags.map(t => `<span class="badge">${t}</span>`).join("");
      mViews.textContent = `${formatNumber(s.views)} views`;
      mLikes.textContent = `${formatNumber(s.likes)} likes`;
      mDate.textContent  = formatDate(s.created);
      mAuthor.textContent= s.author;
      mPatched.classList.toggle("hidden", !s.isPatched);
      mCode.textContent  = s.scriptContent || "// No code provided";
      modal.classList.remove("hidden");
      document.body.style.overflow = "hidden";
      window.lucide && lucide.createIcons();
    }
    function closeModalFn() {
      modal.classList.add("hidden");
      document.body.style.overflow = "";
    }
    closeModal.addEventListener("click", closeModalFn);
    modal.addEventListener("click", (e) => { if (e.target === modal) closeModalFn(); });

    copyBtn.addEventListener("click", async () => {
      if (!selected) return;
      try {
        await navigator.clipboard.writeText(selected.scriptContent || "");
        showToast();
      } catch (e) {
        alert("Copy failed");
      }
    });

    function showToast() {
      toast.classList.remove("hidden");
      setTimeout(() => toast.classList.add("hidden"), 1600);
    }

    // Search handlers
    searchForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const q = searchInput.value;
      current = search(q);
      renderCards(current);
      if (q.trim()) {
        searchHint.classList.remove("hidden");
        searchText.textContent = q.trim();
        searchCount.textContent = `${current.length} result${current.length === 1 ? "" : "s"}`;
      } else {
        searchHint.classList.add("hidden");
      }
    });
    searchInput.addEventListener("input", () => {
      if (!searchInput.value.trim()) {
        current = [...mockScripts];
        renderCards(current);
        searchHint.classList.add("hidden");
      }
    });

    refreshBtn.addEventListener("click", () => {
      // simple "reload": re-run the current query if any
      const q = searchInput.value;
      current = search(q);
      renderCards(current);
      if (q.trim()) {
        searchHint.classList.remove("hidden");
        searchText.textContent = q.trim();
        searchCount.textContent = `${current.length} result${current.length === 1 ? "" : "s"}`;
      }
    });

    // Initial render
    current = [...mockScripts];
    renderCards(current);

    // Boot lucide icons initially
    window.lucide && lucide.createIcons();
  </script>
</body>
</html>
